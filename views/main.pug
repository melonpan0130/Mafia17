html
    head
        script(src="/socket.io/socket.io.js")
        script(src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous")
        //- script
            include ../js/gameChat.js
        style
            include ../css/gameChat.css
        script.
            var socket = io();
            var name, Roomcode;

            function validation() {
                var name = document.getElementById('name');
                var room = document.getElementById('room');

                if(name.value == ''){
                    alert('Please Write on your name.');
                    name.focus();
                }
                else if(room.value == ''){
                    alert('Please Write on your room code.');
                    room.focus();
                }
                else
                    enter();
            }
            
            function enter(){
                name = document.getElementById('name').value;
                Roomcode = document.getElementById('room').value;

                $("#popup").addClass("hidden");

                socket.emit('joinRoom', Roomcode, name);

                $('form').submit( () => {
                    socket.emit('chat message', Roomcode, name, $('#m').val());
                    $('#m').val('');
                    return false;
                });

                socket.on('chat message', (name, msg) => {
                    $('#messages').append($('<li>').text(name + '  :  ' +
                    msg));
                });

                

                socket.on('joined', (Roomcode, name, players) => {
                    $('#messages').append($('<li>').text(name + '    joined '+Roomcode + ':)'));

                    for(var i=0; i<players.length; i++)
                        $('#guess>div:first-child').append(
                            $('<div class="people">').append('<div class="face">').append('<p>'+players[i].name+'</p>')
                        );
                });
            };

            function gameStart() {
                alert('Game start!');
                $('#guess>div:last-child>div').addClass('gameGuess').toggleClass('hidden');
            }

            function exit() {
                alert('exit');
                socket.emit('leave', Roomcode, name);
                window.location.reload();
            }
    body
        #popup
            table
                tr
                    td: label(for="name") Name
                    td: input(type="text" name="name" placeholder="Name" value="dd" id="name")
                tr
                    td: label(for="room") Room
                    td: input(type="text" name="room" placeholder="Room Code" value="dd" id="room")
                tr
                    td(colspan="2"): input(type="submit" id="enter" value="Enter" onclick="validation()")
        nav Mafia17
        .content
            div: ul(id="history")
            div
                #status This is Night.(the message)
                #msg: ul(id="messages")
                #chatting
                    form(action="")
                        input(type="text" id="m" autocomplete="off")
                        button send
            #guess
                .gameGuess
                    //- for(var a=0; a<6; a++)
                        .people
                            .face
                            p Mafia
                            p userName
                div
                    div
                        button(onclick="gameStart()") Start
                        button(onclick="exit()") Exit
                    .hidden
                        - var jobs = ['mafia.png', 'police.png', 'doctor.png', 'citizen.png', 'ghost.png', 'spy.png', 'politician.png']
                        for img in jobs
                            .people
                                .face: img(src="/img/job/"+img)
                                p Mafia
                                p userName
            div